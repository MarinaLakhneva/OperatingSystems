##Создание демонов в системе linux


Описание


С помощью технологии fork написать программу на языке С++, которая будет запускаться как фоновый процесс(daemon), которая периодически через заданный интервал времени выполняет требуемые действия с содержимым одного или двух каталогов на компьютере. Каталог(и) и интервал между действиями задаются в конфигурационном файле. Конфигурационный файлизначально лежит в рабочей папке при запуске, затем программа должна запоминать его абсолютный путь для дальнейшего использования. Формат конфигурационного файла выбирается на усмотрение автора.

Необходимо предусмотреть обработку сигналов. По сигналу SIGHUP программа должна перечитать конфигурационный файл. По сигналу SIGTERM программа должна вывести в системный журнал сообщение о выходе и завершить работу. Включение, сообщения об ошибках или завершении работы программы должны регистрироваться в системном журнале. Для работы с системным журналом используйте функции openlog, syslog, closelog. Демон должен быть защищен от повторного запуска с помощью pid-файла - при запуске демона, новый процесс должен смотреть в pid файл, затем проверять наличие процесса, указанного в нем с помощью системы “/proc”, если процесс с таким pid существует, ему должен быть отправлен сигнал SIGTERM, после чего новый процесс записывает свой pid после демонизации.

Класс демона должен быть синглтоном, поскольку такова сущность самого демона: он существует в единственном экземпляре.


Сборка


Программа должна собираться из исходников с помощью скрипта build.sh, который автоматически компилирует исходные файлы в один исполняемый файл. Исходные файлы должны компилироваться с флагами -Wall и –Werror. Внутри скрипта можно вызывать g++ напрямую, или же пользоваться утилитой make или cmake. Скрипт должен автоматически очищать за собой промежуточные файлы.


22	Удалять все подпапки папки 1 вплоть до глубины depth	60	10